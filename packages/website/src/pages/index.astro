---
import { SITE_DESCRIPTION, SITE_TITLE } from "#/consts";
import Default from "#/layouts/Default.astro";
import { Icon } from 'astro-icon/components';
import Navigation from "#/components/Navigation.astro";
import BonzaiCode from "#/components/BonzaiCode.astro";
import Tabs from "#/components/Tabs.astro";

const code = `require "std:http"
require "std:natives"
require "std:tuple"

createParallelHTTP(10, fn(req, id) => {
  print("Received request on $id")
  req.respondText("text/html", "<h1>Hello, world!</h1>")
})

print("Server running on port http://localhost:8000")`;

const codeConcurrency = `actor Greeter < Greetings {
  on greet(name: string) => {
    print("Hello, $name!")
  }
}

let g1 = spawn Greeter
let g2 = spawn Greeter

g1->greet("Alice")
g2->greet("Bob")`;

const codeReactive = `live count = 0
let newCount = count + 1 // Count is 1 here

count = 1

// newCount is 2 here`;

const codeDataTypes = `type Person {
  Person(name: string, age: int)
}

let alice = Person("Alice", 30)

match alice {
  case Person(name, age) => 
    print("Hello $name! You are $age.")
}`;
---

<Default 
  title={SITE_TITLE} 
  description={SITE_DESCRIPTION}
  class="bg-neutral-900"
>
  <Navigation />
  <main class="max-w-6xl mx-auto py-32 grid grid-cols-2 gap-16 place-items-center">
    <div>
      <h1 class="text-white text-4xl">
        Bring concurrency to the next level
      </h1>

      <p class="text-lg text-white/50 my-6">
        Bonzai is a programming language that supports actor model execution and reactive programming. It is designed to be simple, easy to learn, and efficient.
      </p>
      
      <div class="flex gap-4 mt-12">
        <a href="/docs/get-started" class="bg-cobalt-800 hover:bg-cobalt-900 text-white py-3 px-8 inline-block rounded-lg font-mono font-medium">
          Get started
        </a>

        <a href="https://github.com/thomasvergne/bonzai" class="bg-white/10 hover:bg-white/20 text-white py-3 px-8 rounded-lg font-mono font-medium flex items-center gap-4">
          <Icon name="tabler:brand-github" class="text-white w-6 h-6" />

          Star on GitHub
        </a>
      </div>
    </div>

    <BonzaiCode {code} />
  </main>
  
  <section class="py-16 bg-white/[0.02]">
    <span class="text-white/50 text-center block uppercase font-mono">
      Bonzai Language
    </span>
    <h2 class="text-4xl text-white text-center my-2">
      Core Features
    </h2>

    <Tabs class="grid grid-cols-2 gap-16 items-center mt-16 max-w-6xl mx-auto ">
      <div slot="triggers" class="flex flex-col items-start">
        <button class="text-white/50 py-2 px-4 rounded-lg text-left prose prose-invert group" tabindex="0" data-tabs-trigger>
          <h3 class="font-mono">
            Built-in concurrency
          </h3>
          <p class="group-aria-selected:block hidden">
            Bonzai provides a simple and efficient way to write concurrent programs. It supports parallel execution, asynchronous I/O, and non-blocking operations.
          </p>
        </button>

        <button class="text-white/50 py-2 px-4 rounded-lg text-left prose prose-invert group" tabindex="1" data-tabs-trigger>
          <h3 class="font-mono">
            Reactive programming
          </h3>
          <p class="group-aria-selected:block hidden">
            Bonzai supports reactive programming, which allows you to write event-driven and responsive applications. It provides a simple and declarative way to handle asynchronous events.
          </p>
        </button>

        
        <button class="text-white/50 py-2 px-4 rounded-lg text-left prose prose-invert group" tabindex="2" data-tabs-trigger>
          <h3 class="font-mono">
            User defined data-types
          </h3>
          <p class="group-aria-selected:block hidden">
            Bonzai allows you to define your own data types, which makes it easy to model complex data structures. It provides a simple and powerful way to work with data.
          </p>
        </button>
      </div>

      <div slot="panels" data-tabs-panel class="col-span-1">
        <BonzaiCode code={codeConcurrency} />

        <BonzaiCode code={codeReactive} />

        <BonzaiCode code={codeDataTypes} />
      </div>
    </Tabs>

    <div class="flex justify-center mt-16">
      <a href="/docs/language-reference/features" class="bg-cobalt-800 hover:bg-cobalt-900 text-white py-3 px-8 inline-block rounded-lg font-mono font-medium">
        Learn more
      </a>
    </div>
  </section>

</Default>